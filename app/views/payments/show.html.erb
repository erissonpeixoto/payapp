<% unless notice.nil? %>
  <div class="row">
    <div class="col s12 m12">
        <div class="card-panel green accent-2">
          <span id="notice" class="black-text">
            <i class="material-icons">check</i>
            <%= notice %>
          </span>
        </div>
    </div>
  </div>
<% end %>

<p>
  <strong>Data Pagamento:</strong>
  <%= @payment.payday.to_s(:custom_datetime) %>
</p>

<p>
  <strong>Status:</strong>
  <%= badges(@payment.status) %>
</p>

<p>
  <strong>Observação:</strong>
  <%= @payment.note %>
</p>

<p>
  <strong>Saldo do Pagamento:</strong>
  <%= @payment.balance_in_percentage.to_s << "%"%>
</p>
<div class="progress">
  <div class="determinate" style="width: <%= @payment.balance_in_percentage.to_s %>%"></div>
</div>

<hr>

<div class="row">
  <div class="col s12 m6">
    <h4 class="header red-text text-lighten-1 center-align">Lista de Despesas</h4>
    <ul class="collection">
      <% @payment.expense_payments.each do |expense_payment| %>
        <li class="collection-item">
          <div class="row" style="margin-bottom: 0;">
            <div class="col s8">
              <span class="title" style="font-weight: bold;"><%= expense_payment.expense.name %></span>
              <p style="margin: 0;"><%= expense_payment.expense.category.name %></p>
            </div>
            <div class="col s4 right-align red-text">
              <%= number_to_currency(expense_payment.value, unit: "R$ ", separator: ",", delimiter: ".") %>
            </div>
            <div class="col s12">
              Fixo: <%= badges_boolean(expense_payment.expense.fixed, :expense) %>
            </div>
          </div>
        </li>
      <% end %>
      <li class="collection-item">
        <div>
          <strong>Valor Total (despesas):</strong>
          <span class="secondary-content red-text bold">
            <strong>
              <%= number_to_currency(@payment.expense_payments.sum(:value), unit: "R$ ", separator: ",", delimiter: ".") %>
            </strong>
          </span>
        </div>
      </li>
    </ul>
  </div>

  <div class="col s12 m6">
    <h4 class="header green-text text-lighten-1 center-align">Lista de Receitas</h4>
    <ul class="collection">
      <% @payment.revenue_payments.each do |revenue_payment| %>
        <li class="collection-item">
          <div class="row" style="margin-bottom: 0;">
            <div class="col s8">
              <span class="title" style="font-weight: bold;"><%= revenue_payment.revenue.name %></span>
              <p style="margin: 0;"><%= revenue_payment.revenue.category.name %></p>
            </div>
            <div class="col s4 right-align green-text">
              <%= number_to_currency(revenue_payment.value, unit: "R$ ", separator: ",", delimiter: ".") %>
            </div>
            <div class="col s12">
              Fixo: <%= badges_boolean(revenue_payment.revenue.fixed, :revenue) %>
            </div>
          </div>
        </li>
      <% end %>
      <li class="collection-item">
        <div>
          <strong>Valor Total (receitas):</strong>
          <span class="secondary-content green-text bold">
            <strong>
              <%= number_to_currency(@payment.revenue_payments.sum(:value), unit: "R$ ", separator: ",", delimiter: ".") %>
            </strong>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>

<hr>

<p class="right-align bold">
  <strong>Saldo Total (pagamento):</strong>
  <%= number_to_currency(@payment.value, unit: "R$ ", separator: ",", delimiter: ".") %>
</p>

<%= link_to 'Editar', edit_payment_path(@payment), class: 'waves-effect waves-light btn blue-grey' %> |
<%= link_to 'Voltar', payments_path, class: 'waves-effect waves-light btn blue-grey' %>
